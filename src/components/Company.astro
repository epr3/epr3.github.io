---
import dayjs from "dayjs";
import { getCollection } from "astro:content";
import Project from "./Project.astro";
export interface Props {
  id: string;
  name: string;
  startDate: string;
  endDate?: string;
}

const { id, name, startDate, endDate } = Astro.props;

const projects = await getCollection(
  "projects",
  (entry) => entry.data.company.id === id
);

projects.sort((a, b) => (a.data.order > b.data.order ? -1 : 1));
---

<div class="flex flex-col gap-4 pt-8">
  <div class="flex flex-col gap-4 md:(flex-row items-center justify-between)">
    <h2 class="text-xl font-semibold">{name}</h2>
    <div
      class="text-white font-semibold text-lg py-2 px-4 bg-blue-9 rounded-full text-center"
    >
      {dayjs(startDate).format("MMM YYYY")} - {
        endDate ? dayjs(endDate).format("MMM YYYY") : "present"
      }
    </div>
  </div>

  <h3 class="text-2xl font-medium">Projects</h3>
  {projects.map((project) => <Project project={project} />)}
</div>
